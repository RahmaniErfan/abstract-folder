/* Abstract Folder View Container */
.abstract-folder-view {
    padding: 0;
    margin: 0;
    height: 100%;
    overflow-y: auto;
}

/* Force the view header to display for the abstract-folder-view type */
.workspace-leaf-content[data-type="abstract-folder-view"] .view-header {
    display: flex !important;
    /* Add any other necessary default header styles if they are missing */
    flex-direction: row !important;
    align-items: center !important;
    justify-content: flex-start !important;
    height: 40px !important; /* Standard header height */
    padding: 0 10px !important; /* Reintroduce standard horizontal padding */
    border-bottom: 1px solid var(--background-modifier-border) !important;
    background-color: var(--background-primary) !important;
}
n 
/* Ensure the actions container within the header is also displayed and styled */
.workspace-leaf-content[data-type="abstract-folder-view"] .view-header .view-actions {
    display: flex !important;
    align-items: center !important;
    gap: 4px !important; /* Space between action buttons */
}

.workspace-leaf-content[data-type="abstract-folder-view"] .view-header .view-header-nav-buttons {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    min-width: 0 !important;
    overflow: hidden !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

/* Hide the bookmark button with extreme prejudice */
.workspace-leaf-content[data-type="abstract-folder-view"] .view-header .view-actions .mod-bookmark {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
    width: 0 !important;
    height: 0 !important;
    min-width: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}


.abstract-folder-tree {
    padding-bottom: 20px;
}

/* Empty State */
.abstract-folder-empty-state {
    padding: 20px;
    text-align: center;
    color: var(--text-muted);
}

/* Tree Item Structure */
.abstract-folder-item {
    /* For tree view: each item is a vertical stack of self + children */
    display: flex;
    flex-direction: column;
}

/* Column View Specific Styles */
.abstract-folder-columns-wrapper {
    display: flex;
    flex-direction: column; /* Stacks columns vertically */
    height: 100%;
    overflow-y: hidden; /* Each column will manage its own scroll */
}

.abstract-folder-columns-container {
    display: flex;
    flex-direction: column; /* Columns stacked vertically */
    flex-grow: 1; /* Take up all available vertical space */
    overflow-y: auto; /* Allow scrolling for the entire container if many columns */
}

.abstract-folder-column {
    flex-shrink: 0; /* Prevent columns from shrinking below content */
    flex-grow: 1; /* Allow columns to grow to fill space */
    border-bottom: 1px solid var(--background-modifier-border); /* Separator between columns */
    padding: 5px 0; /* Vertical padding within each column */
    overflow-y: auto; /* Individual column scrolling */
    min-height: 50px; /* Minimum height for a column */
    max-height: 100%; /* Ensure column doesn't exceed parent */
}

.abstract-folder-column:last-child {
    border-bottom: none; /* No border on the last column */
}

/* Item self for column view, slightly different padding */
.abstract-folder-column .abstract-folder-item-self {
    padding-left: 10px; /* Adjust padding for column view */
}

/* Hide collapse icon in column view */
.abstract-folder-columns-wrapper .abstract-folder-collapse-icon {
    display: none;
}

/* In column view, don't show children containers */
.abstract-folder-columns-wrapper .abstract-folder-children {
    display: none;
}

/* Style for selected item in column view */
.abstract-folder-item-self.is-selected-in-column {
    background-color: var(--background-modifier-accent); /* A distinct highlight color for selected items */
    color: var(--text-normal);
}
/* Multi-select styles moved to end of file for precedence */

.abstract-folder-item-self.is-selected-in-column .abstract-folder-item-icon svg {
    color: var(--text-normal); /* Ensure icon color matches */
}


/* Multi-Parent Indicator */
.abstract-folder-multi-parent-indicator {
    margin-left: auto; /* Push to the right */
    color: var(--text-muted);
    opacity: 0.7;
    font-size: var(--font-ui-smaller);
    display: flex; /* For icon sizing */
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
}

.abstract-folder-multi-parent-indicator svg {
    width: 12px;
    height: 12px;
}

/* The clickable row */
.abstract-folder-item-self {
    display: flex;
    align-items: center;
    cursor: pointer;
    padding: 2px 6px 2px 6px;
    border-radius: var(--radius-s);
    color: var(--text-normal);
    transition: background-color 0.1s ease-in-out;
}

.abstract-folder-item-self:hover {
    background-color: var(--nav-item-background-hover);
    color: var(--nav-item-text-color-hover);
}

.abstract-folder-item-self.is-active {
    background-color: var(--nav-item-background-active);
    color: var(--nav-item-text-color-active);
    font-weight: var(--font-medium);
}

/* Collapse Icon */
.abstract-folder-collapse-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    margin-right: 2px;
    color: var(--collapse-icon-color);
    transition: transform 0.1s ease-in-out;
}
.abstract-folder-collapse-icon svg {
    transform: rotate(90deg); /* Default: points down when expanded */
    transition: transform 0.1s ease-in-out;
}

.abstract-folder-item.is-collapsed > .abstract-folder-item-self > .abstract-folder-collapse-icon svg {
    transform: rotate(0deg); /* When collapsed: points right */
}

.abstract-folder-collapse-icon:hover {
    color: var(--collapse-icon-color-hover);
}

/* Inner Text */
.abstract-folder-item-inner {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Children Container */
.abstract-folder-children {
    padding-left: 18px; /* Standard indentation */
    border-left: 1px solid var(--nav-indentation-guide-color);
    margin-left: 8px; /* Align guide line with icon center roughly */
}

/* Rainbow Indents */
.abstract-folder-children.rainbow-indent {
    border-left-width: 2px; /* Make it a bit more prominent */
}

/* Classic Palette */
.abstract-folder-children.classic-palette.rainbow-indent-0 { border-left-color: #61afef; } /* Blue */
.abstract-folder-children.classic-palette.rainbow-indent-1 { border-left-color: #c678dd; } /* Purple */
.abstract-folder-children.classic-palette.rainbow-indent-2 { border-left-color: #98c379; } /* Green */
.abstract-folder-children.classic-palette.rainbow-indent-3 { border-left-color: #e6c07b; } /* Yellow */
.abstract-folder-children.classic-palette.rainbow-indent-4 { border-left-color: #e06c75; } /* Red */
.abstract-folder-children.classic-palette.rainbow-indent-5 { border-left-color: #56b6c2; } /* Cyan */

/* Pastel Palette */
.abstract-folder-children.pastel-palette.rainbow-indent-0 { border-left-color: #a7bed3; } /* Light Blue */
.abstract-folder-children.pastel-palette.rainbow-indent-1 { border-left-color: #d1c4e9; } /* Lavender */
.abstract-folder-children.pastel-palette.rainbow-indent-2 { border-left-color: #c8e6c9; } /* Mint Green */
.abstract-folder-children.pastel-palette.rainbow-indent-3 { border-left-color: #ffe0b2; } /* Peach */
.abstract-folder-children.pastel-palette.rainbow-indent-4 { border-left-color: #ffccbc; } /* Coral */
.abstract-folder-children.pastel-palette.rainbow-indent-5 { border-left-color: #bbdefb; } /* Sky Blue */

/* Neon Palette */
.abstract-folder-children.neon-palette.rainbow-indent-0 { border-left-color: #00ffff; } /* Aqua */
.abstract-folder-children.neon-palette.rainbow-indent-1 { border-left-color: #ff00ff; } /* Magenta */
.abstract-folder-children.neon-palette.rainbow-indent-2 { border-left-color: #00ff00; } /* Lime */
.abstract-folder-children.neon-palette.rainbow-indent-3 { border-left-color: #ffff00; } /* Bright Yellow */
.abstract-folder-children.neon-palette.rainbow-indent-4 { border-left-color: #ff0000; } /* Red */
.abstract-folder-children.neon-palette.rainbow-indent-5 { border-left-color: #0000ff; } /* Blue */


/* Hide children when collapsed */
.abstract-folder-item.is-collapsed > .abstract-folder-children {
    display: none;
}

/* File items don't have collapse icons, add padding to align */
.abstract-folder-item.is-file .abstract-folder-item-self {
    padding-left: 24px; /* 6px padding + 16px icon width + 2px margin */
}

/* Loop detection warning */
.abstract-folder-loop {
    padding: 4px 8px;
    background-color: var(--background-modifier-error-hover);
    color: var(--text-error);
    font-size: var(--font-ui-smaller);
    margin-left: 20px;
    border-radius: 4px;
}

/* Icon Modal Specific Styles */
.abstract-folder-icon-modal .modal-content {
    max-width: 600px; /* Adjust modal width for better icon grid display */
}

.abstract-folder-icon-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(40px, 1fr)); /* Responsive grid */
    gap: 8px;
    padding: 16px; /* Increased padding */
    max-height: 300px; /* Limit height and make scrollable */
    overflow-y: auto;
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--radius-s);
    margin-top: 10px;
}

.abstract-folder-grid-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 12px; /* Increased padding for individual items */
    border-radius: var(--radius-s);
    cursor: pointer;
    background-color: var(--background-secondary);
    transition: background-color 0.1s ease-in-out, border-color 0.1s ease-in-out;
    position: relative;
    --icon-size: 24px; /* Slightly larger icon size in picker */
    border: 1px solid transparent;
}

.abstract-folder-grid-item:hover {
    background-color: var(--background-modifier-hover);
    border-color: var(--interactive-hover);
}

.abstract-folder-grid-item.is-active {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
    border-color: var(--interactive-accent);
}

.abstract-folder-grid-item.is-active svg {
    color: var(--text-on-accent);
}

.abstract-folder-no-icons {
    grid-column: 1 / -1; /* Span all columns */
    text-align: center;
    padding: 20px;
    color: var(--text-muted);
    width: 100%; /* Ensure full width usage */
}

.abstract-folder-item-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px; /* Standard icon size */
    height: 16px;
    margin-right: 4px; /* Space between icon and text */
    flex-shrink: 0; /* Prevent icon from shrinking */
    font-size: 14px; /* For emojis */
}

.abstract-folder-item-icon svg {
    width: 100%;
    height: 100%;
}

/* Styles for view header actions (sort, expand/collapse buttons) */
/* Styles for view header actions (sort, expand/collapse buttons) */
/* Increased specificity to ensure override */
.workspace-leaf-content[data-type="abstract-folder-view"] .view-header .view-actions .view-action {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 28px !important; /* Explicit width */
    height: 28px !important; /* Explicit height */
    min-width: 28px !important; /* Ensure minimum width */
    min-height: 28px !important; /* Ensure minimum height */
    color: var(--icon-color) !important; /* Use Obsidian's default icon color */
    background-color: var(--background-secondary) !important; /* Give it a distinct background for visibility */
    border: 1px solid var(--background-modifier-border) !important; /* Add a border */
    border-radius: var(--radius-s) !important;
    cursor: pointer !important;
    transition: background-color 0.1s ease-in-out !important;
    box-shadow: var(--shadow-s) !important; /* Add a subtle shadow for prominence */
}

.workspace-leaf-content[data-type="abstract-folder-view"] .view-header .view-actions .view-action:hover {
    background-color: var(--background-modifier-hover) !important;
    color: var(--icon-color-hover) !important;
}

/* Ensure icons within the buttons are also visible and sized correctly */
.workspace-leaf-content[data-type="abstract-folder-view"] .view-header .view-actions .view-action svg {
    width: 16px !important; /* Standard icon size */
    height: 16px !important; /* Standard icon size */
    stroke: currentColor !important;
}


/* Adjust indentation for "Abstract Folders" title */
.workspace-leaf-content[data-type="abstract-folder-view"] .view-header-left {
    /* Re-enable display of the left header section to allow the icon to show */
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    /* Hide specific children if they are navigation buttons */
    /* .view-header-nav-buttons will still be hidden by earlier rule if it applies */
}

.workspace-leaf-content[data-type="abstract-folder-view"] .view-header-title-container {
    margin: 0 !important; /* Reset all margins */
    padding-left: 0 !important; /* Reset padding, as the icon will now provide spacing */
    padding-right: 0 !important; /* Ensure no right padding */
    flex-grow: 0 !important; /* Prevent title container from expanding */
    flex-shrink: 0 !important; /* Prevent title container from shrinking */
    min-width: 0 !important; /* Prevent minimum width from overriding flex-grow */
    width: auto !important; /* Ensure width is not fixed */
    text-align: left !important; /* Ensure text alignment is left */
}

.workspace-leaf-content[data-type="abstract-folder-view"] .view-header-title {
    padding: 0 !important; /* Reset padding for the title text itself */
    margin: 0 !important; /* Reset margin for the title text itself */
    flex-grow: 0 !important; /* Prevent title from expanding */
    text-align: left !important; /* Ensure text alignment is left */
}

/* Push view actions to the right when header is flex-start */
.workspace-leaf-content[data-type="abstract-folder-view"] .view-header .view-actions {
    margin-left: auto !important;
}

/* Style for multi-selected item - Moved here to override hover/active states if needed */
.abstract-folder-item-self.is-multi-selected {
    background-color: var(--nav-item-background-active); /* Make it look like an active item */
    color: var(--nav-item-text-color-active);
    font-weight: var(--font-medium);
}

.abstract-folder-item-self.is-multi-selected .abstract-folder-item-icon svg {
    color: var(--nav-item-text-color-active);
}
